{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/shivamc/Downloads/shopping_website/online shop fe/online-shopping/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/shivamc/Downloads/shopping_website/online shop fe/online-shopping/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/shivamc/Downloads/shopping_website/online shop fe/online-shopping/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import axios from\"axios\";import React from\"react\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MyCart=function MyCart(){var navigate=useNavigate();var user=JSON.parse(sessionStorage.getItem(\"active-user\"));var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),totatPrice=_useState2[0],setTotalPrice=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),myCartData=_useState4[0],setMyCartData=_useState4[1];useEffect(function(){var getMyCart=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var myCart;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return retrieveMyCart();case 2:myCart=_context.sent;if(myCart){console.log(\"cart data is present :)\");console.log(myCart.totalCartPrice);console.log(myCart.cartData);setTotalPrice(myCart.totalCartPrice);setMyCartData(myCart.cartData);}case 4:case\"end\":return _context.stop();}}},_callee);}));return function getMyCart(){return _ref.apply(this,arguments);};}();getMyCart();},[]);var retrieveMyCart=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"http://localhost:8080/api/user/mycart?userId=\"+user.id);case 2:response=_context2.sent;console.log(response.data);return _context2.abrupt(\"return\",response.data);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function retrieveMyCart(){return _ref2.apply(this,arguments);};}();var deleteProductFromCart=function deleteProductFromCart(cartId,e){var response=axios.get(\"http://localhost:8080/api/user/mycart/remove?cartId=\"+cartId);console.log(response);};var checkout=function checkout(e){e.preventDefault();console.log(\"CHECKOUT PAGE REQUEST\");navigate(\"/user/order/payment\",{state:{priceToPay:totatPrice}});};return/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card form-card ms-2 me-2 mb-5 custom-bg border-color\",style:{height:\"45rem\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header text-center bg-color custom-bg-text\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"My Cart\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",style:{overflowY:\"auto\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-hover custom-bg-text text-center\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-color table-bordered border-color\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Product\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"text-color\",children:myCartData.map(function(cartData){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:8080/api/product/\"+cartData.productImage,class:\"img-fluid\",alt:\"product_pic\",style:{maxWidth:\"90px\"}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"b\",{children:cartData.productName})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"b\",{children:cartData.productDescription})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"b\",{children:cartData.quantity})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn bg-color custom-bg-text btn-sm\",onClick:function onClick(){return deleteProductFromCart(cartData.cartId);},children:\"Delete\"})})]});})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-footer custom-bg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"float-right\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-color me-2\",style:{textAlign:\"right\"},children:/*#__PURE__*/_jsxs(\"h5\",{children:[\"Total Price: \\u20B9 \",totatPrice,\"/-\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"float-end me-2\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn bg-color custom-bg-text mb-3\",onClick:checkout,children:\"Checkout\"})})]})})]})});};export default MyCart;","map":{"version":3,"names":["useState","useEffect","axios","React","useNavigate","MyCart","navigate","user","JSON","parse","sessionStorage","getItem","totatPrice","setTotalPrice","myCartData","setMyCartData","getMyCart","retrieveMyCart","myCart","console","log","totalCartPrice","cartData","get","id","response","data","deleteProductFromCart","cartId","e","checkout","preventDefault","state","priceToPay","height","overflowY","map","productImage","maxWidth","productName","productDescription","quantity","textAlign"],"sources":["C:/Users/shivamc/Downloads/shopping_website/online shop fe/online-shopping/src/userComponent/MyCart.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport React from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst MyCart = () => {\r\n  let navigate = useNavigate();\r\n  const user = JSON.parse(sessionStorage.getItem(\"active-user\"));\r\n  const [totatPrice, setTotalPrice] = useState(\"\");\r\n  const [myCartData, setMyCartData] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const getMyCart = async () => {\r\n      const myCart = await retrieveMyCart();\r\n      if (myCart) {\r\n        console.log(\"cart data is present :)\");\r\n        console.log(myCart.totalCartPrice);\r\n        console.log(myCart.cartData);\r\n        setTotalPrice(myCart.totalCartPrice);\r\n        setMyCartData(myCart.cartData);\r\n      }\r\n    };\r\n\r\n    getMyCart();\r\n  }, []);\r\n\r\n  const retrieveMyCart = async () => {\r\n    const response = await axios.get(\r\n      \"http://localhost:8080/api/user/mycart?userId=\" + user.id\r\n    );\r\n    console.log(response.data);\r\n    return response.data;\r\n  };\r\n\r\n  const deleteProductFromCart = (cartId, e) => {\r\n    const response = axios.get(\r\n      \"http://localhost:8080/api/user/mycart/remove?cartId=\" + cartId\r\n    );\r\n\r\n    console.log(response);\r\n  };\r\n\r\n  const checkout = (e) => {\r\n    e.preventDefault();\r\n    console.log(\"CHECKOUT PAGE REQUEST\");\r\n    navigate(\"/user/order/payment\", { state: { priceToPay: totatPrice } });\r\n  };\r\n\r\n  return (\r\n    <div className=\"mt-3\">\r\n      <div\r\n        className=\"card form-card ms-2 me-2 mb-5 custom-bg border-color\"\r\n        style={{\r\n          height: \"45rem\",\r\n        }}\r\n      >\r\n        <div className=\"card-header text-center bg-color custom-bg-text\">\r\n          <h2>My Cart</h2>\r\n        </div>\r\n        <div\r\n          className=\"card-body\"\r\n          style={{\r\n            overflowY: \"auto\",\r\n          }}\r\n        >\r\n          <div className=\"table-responsive\">\r\n            <table className=\"table table-hover custom-bg-text text-center\">\r\n              <thead className=\"bg-color table-bordered border-color\">\r\n                <tr>\r\n                  <th scope=\"col\">Product</th>\r\n                  <th scope=\"col\">Name</th>\r\n                  <th scope=\"col\">Description</th>\r\n                  <th scope=\"col\">Quantity</th>\r\n                  <th scope=\"col\">Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"text-color\">\r\n                {myCartData.map((cartData) => {\r\n                  return (\r\n                    <tr>\r\n                      <td>\r\n                        <img\r\n                          src={\r\n                            \"http://localhost:8080/api/product/\" +\r\n                            cartData.productImage\r\n                          }\r\n                          class=\"img-fluid\"\r\n                          alt=\"product_pic\"\r\n                          style={{\r\n                            maxWidth: \"90px\",\r\n                          }}\r\n                        />\r\n                      </td>\r\n                      <td>\r\n                        <b>{cartData.productName}</b>\r\n                      </td>\r\n                      <td>\r\n                        <b>{cartData.productDescription}</b>\r\n                      </td>\r\n                      <td>\r\n                        <b>{cartData.quantity}</b>\r\n                      </td>\r\n                      <td>\r\n                        <button\r\n                          className=\"btn bg-color custom-bg-text btn-sm\"\r\n                          onClick={() => deleteProductFromCart(cartData.cartId)}\r\n                        >\r\n                          Delete\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n        <div className=\"card-footer custom-bg\">\r\n          <div className=\"float-right\">\r\n            <div\r\n              className=\"text-color me-2\"\r\n              style={{\r\n                textAlign: \"right\",\r\n              }}\r\n            >\r\n              <h5>Total Price: &#8377; {totatPrice}/-</h5>\r\n            </div>\r\n\r\n            <div className=\"float-end me-2\">\r\n              <button\r\n                type=\"submit\"\r\n                className=\"btn bg-color custom-bg-text mb-3\"\r\n                onClick={checkout}\r\n              >\r\n                Checkout\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyCart;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}